const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;jQuery("document").ready((function(e){e(".leads-listing").DataTable({dom:"Bfrtip",pageLength:20,lengthChange:!1,oLanguage:{sEmptyTable:__("You don't have any leads yet. Once you collect email leads, the data will appear in this table.","coupon-x-discount-pop-up")},buttons:[{extend:"csv",exportOptions:{columns:[1,2,3,4]}},{text:__("Delete","coupon-x-discount-pop-up"),attr:{id:"btn-delete"},action:function(l,o,a,d){if(0==e(".chk_lead:checked").length)alert(__("Please select at least one record","coupon-x-discount-pop-up"));else{let l=[];e("#lead-delete-confirm p").text(__("Are you sure you want to delete selected leads?","coupon-x-discount-pop-up")),e(".chk_lead:checked").each((function(){l.push(e(this).val())})),leads=l.join(","),e("#dashboard_lead_id").val(leads),t.dialog("open")}}}]}),e(".select-all").click((function(){e(this).is(":checked")?e(".chk_lead").prop("checked",!0):e(".chk_lead").prop("checked",!1)})),e(".chk_lead").click((function(){e(this).is(":checked")||e(".select-all").prop("checked",!1)}));let t=e("#lead-delete-confirm").dialog({resizable:!1,modal:!0,draggable:!1,height:"auto",width:400,overflow:"auto",autoOpen:!1,buttons:[{text:__("Cancel","coupon-x-discount-pop-up"),class:"btn btn-cancel",click:function(){e(this).dialog("close")}},{text:__("Delete Lead","coupon-x-discount-pop-up"),class:"btn btn-red",click:function(){url=cx_data.url,leads=e("#dashboard_lead_id").val();let t=[];e("#lead-delete-confirm p").text(__("Are you sure you want to delete selected leads?","coupon-x-discount-pop-up")),""!=leads&&(t=leads.split(",")),e("#loader").show(),e.ajax({url:url,data:{id:t,action:"delete_leads",nonce:e('input[name="cx_nonce"]').val()},type:"post",dataType:"json",success:function(t){ids=leads.split(","),e.each(ids,(function(t,l){e('.chk_lead[value="'+l+'"').closest("tr").hide()})),e("#loader").hide(),e("#wp_flash_message").removeClass("hide"),setTimeout((function(){e("#wp_flash_message").addClass("hide"),location.reload()}),2e3)}}),e(this).dialog("close")}}]});e("body").on("click",".ui-widget-overlay",(function(){t.dialog("close")})),e(".close_flash_popup").click((function(){e("#wp_flash_message").addClass("hide")})),e(".delete-lead").click((function(l){l.preventDefault(),link=e(this).closest("tr"),e("#lead-delete-confirm p").text(__("Are you sure you want to delete this lead?","coupon-x-discount-pop-up"));let o=e(this).attr("lead-id");e("#dashboard_lead_id").val(o),t.dialog("open")}))}));